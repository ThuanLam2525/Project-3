@model dynamic
@using BanHangEntityClient.Models;

@{
    ViewBag.Title = "Chi tiết đơn hàng";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid body-content">
    <div class="d-flex min-vh-100">
        <div class="w-25 my-2 mx-4 bg-light">
            <h4 class="py-2 px-1">
                Tài khoản của
                @if (Session["name"] != null)
                {
                    <span>@Session["name"].ToString()</span>
                }
            </h4>
            <ul class="nav flex-column" style="font-size: 18px">
                <li class="nav-item m-2">
                    @Html.ActionLink("Thông tin tài khoản", "Index", "Customers", null, new { @class = "nav-link p-2" })
                </li>
                <li class="nav-item m-2">
                    @Html.ActionLink("Đơn hàng", "Donhang", "Customers", null, new { @class = "nav-link p-2 bg-primary text-light disabled" })
                </li>
                <li class="nav-item m-2">
                    @Html.ActionLink("Đăng xuất", "Dangxuat", "Customers", null, new { @class = "nav-link p-2" })
                </li>
            </ul>
        </div>
        <div class="w-75 my-2 mx-4 bg-light">
            <ul class="breadcrumb py-2 px-1 bg-light" style="font-size: 1.5rem; font-weight: 500; line-height: 1.2">
                <li class="breadcrumb-item">
                    <a href="@Url.Action("Donhang", "Customers")">Đơn hàng</a>
                </li>
                <li class="breadcrumb-item">Chi tiết đơn hàng</li>
            </ul>
            <div class="d-flex flex-wrap p-2">
                <div class="p-2 w-50">
                    <div class="form-group">
                        <label for="buyDate">Ngày mua:</label>
                        <input type="datetime" class="form-control" value="@String.Format("{0:dd/MM/yyyy}", @Model.hoadon.createdDate)" readonly />
                    </div>
                </div>
                <div class="p-2 w-50">
                    <div class="form-group">
                        <label for="reciplient">Người nhận:</label>
                        <input type="text" class="form-control" value="@Model.phieugiaohang.receiverName" readonly />
                    </div>
                </div>
                <div class="p-2 w-50">
                    <div class="form-group">
                        <label for="status">Trạng thái:</label>
                        <input type="text" class="form-control" value="@Model.hoadon.status" readonly />
                    </div>
                </div>
                <div class="p-2 w-50">
                    <div class="form-group">
                        <label for="address">Địa chỉ giao:</label>
                        <input type="text" class="form-control mw-100" value="@Model.phieugiaohang.address" readonly />
                    </div>
                </div>
            </div>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th class="text-center" style="width: 5%">#</th>
                        <th style="width: 35%">Tên</th>
                        <th style="width: 10%">Số lượng</th>
                        <th style="width: 20%">Đơn giá</th>
                        <th style="width: 20%">Thành tiền</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        int i = 1;
                        decimal thanhtien = 0;
                        decimal tongcong = 0;
                        foreach (CartDv dv in Model.cacthietbi)
                        {
                            thanhtien = @dv.Device.price * @dv.Quantity;
                            tongcong += thanhtien;
                            <tr>
                                <td class="text-center">@i</td>
                                <td>@dv.Device.name</td>
                                <td>@dv.Quantity</td>
                                <td>@Convert.ToString(string.Format("{0:#,##0đ}", @dv.Device.price))</td>
                                <td>@Convert.ToString(string.Format("{0:#,##0đ}", @thanhtien))</td>
                            </tr>
                            i++;
                        }
                        foreach (CartCb cb in Model.caccombo)
                        {
                            thanhtien = @cb.Combo.finalMoney * cb.Quantity;
                            tongcong += thanhtien;
                            <tr>
                                <td class="text-center">@i</td>
                                <td>@cb.Combo.name</td>
                                <td>@cb.Quantity</td>
                                <td>@Convert.ToString(string.Format("{0:#,##0đ}", @cb.Combo.finalMoney))</td>
                                <td>@Convert.ToString(string.Format("{0:#,##0đ}", @thanhtien))</td>
                            </tr>
                            i++;
                        }
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4" class="text-right font-weight-bold">Tổng cộng:
                        </td>
                        <td>
                            <span class="font-weight-bold">@Convert.ToString(string.Format("{0:#,##0đ}", @tongcong))</span>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
